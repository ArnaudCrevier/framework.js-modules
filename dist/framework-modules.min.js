!function(a){"use strict";a.fn.extend({blankLink:function(){a(this).each(function(){var b=a(this),c=b.attr("href");c&&(/^https?:\/\//.test(c)||/^\/workspace/.test(c))&&"_blank"!=b.attr("target")&&(/^:\/\//.test(c)||b.attr("target","_blank"))})}});var b=function(b,c){a("a",a(c.page.key())).blankLink()},c=function(){},d={page:{enter:b}};App.modules.exports("blankLinkModule",{init:c,actions:function(){return d}})}(jQuery),function(a){"use strict";var b=function(a){return a.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=]+[^:\.,\)\s*$])/gi,function(a,b){return'<a title="'+a+'" href="'+a+'" target="_blank">'+(b.length>36?b.substr(0,35)+"&hellip;":b)+"</a>"})},c=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,15}(\/[a-zA-Z0-9-_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+)*)/g,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'" target="_blank">@'+c+"</a>"})},d=function(a){return a.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_^"^<àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+)/g,function(a,b,c){return'"'===a.substr(-1)||"<"==a.substr(-1)?a:b+'<a href="https://twitter.com/search?q=%23'+c+'&src=hash" target="_blank">#'+c+"</a>"})};window.formatTwitter=function(){var e=a(this),f=e.html();"true"!==e.attr("data-formattwitter")&&(f=b(f),f=c(f),f=d(f),e.html(f),e.attr("data-formattwitter","true"))}}(jQuery),function(a){"use strict";var b=function(b){var c=a(this),d=c.attr("href");return b.ctrlKey?void 0:(App.mediator.goto(d),window.pd(b))},c=function(b){var c=a(this),d=c.attr("href");return App.mediator.toggle(d),window.pd(b)},d=function(){return{}},e=function(){a("#site").on("click",'a[href^="/"]:not([href^="/workspace"]):not([data-action^="full"]):not([data-action^="toggle"]):not([data-action^="none"])',b),a("#site").on("click",'a[href^="/"][data-action^="toggle"]',c)};App.modules.exports("links",{init:e,actions:d})}(jQuery),function(a){"use strict";var b={embed:function(a,b){var c=this.getIframe(b,a.data("autoPlay"));c.attr("width","100%"),c.attr("height","100%"),a.append(c)},getIframe:function(){return a("<iframe/>")},play:function(){},pause:function(){}},c=a.extend({},b,{getIframe:function(b){return a('<iframe src="http://player.vimeo.com/video/'+b+"?autoplay=1&api=1"+'"/>')},play:function(b){var c=window.$f(a("iframe",b).get(0));c.api("play")},pause:function(b){var c=window.$f(a("iframe",b).get(0));c.api("pause")}}),d=a.extend({},b,{getIframe:function(b,c){var d=b.indexOf("v=")>0?b.substring(b.indexOf("v=")+2):b.substring(b.lastIndexOf("/"));c=c?c:1;var e=a('<iframe id="youtube-player-'+d+'" src="http://www.youtube.com/embed/'+d+"?feature=oembed&autoplay="+c+"&enablejsapi=1&version=3"+'"/>');return this._player=new window.YT.Player(e.get(0)),e},play:function(){this._player.playVideo()},pause:function(){this._player.pauseVideo()}}),e={Vimeo:c,YouTube:d},f=function(a,b){var c=b.data("videoId"),d=e[b.data("videoProvider")];d.embed(b,c)},g=function(a,b){var c=(b.data("videoId"),e[b.data("videoProvider")]);c.play(b)},h=function(b,c){c.each(function(b,c){var d=a(c),f=d.data("videoId"),g=e[d.data("videoProvider")];g&&f&&d.find("iframe").length&&g.pause(d)})},i=function(b){var c=a(this),d=c.closest(".item-video"),e=a(".item-video-container",d);return f(null,e),c.fadeOut(),a(".item-video-container",d).fadeIn(),window.pd(b)},j=function(){a("#site").on("click","a.play-button",i)},k={loadVideo:f,playVideo:g,pauseVideo:h};App.modules.exports("oEmbed",{init:j,actions:function(){return k}})}(jQuery),function(a){"use strict";a(window),a("#site");var b=function(b,c){var d={service:"sharethis",title:document.title,url:document.location.protocol+"//"+document.location.host+document.location.pathname,type:"large"},e=a.extend(d,c);e.element&&window.stWidget&&window.stWidget.addEntry(e)},c=function(){},d={shareThis:{applyButton:b}};App.modules.exports("shareThis",{init:c,actions:function(){return d}})}(jQuery),function(a){"use strict";var b=(a(window),a("title",document),{}),c=function(){b[document.location.pathname]=a("title").text()},d=function(c,d){var e="";a(d.data).each(function(b,c){return a(c).is("title")?(e=a(c).text(),!0):void 0}),d.url||(d.url=document.location.pathname),b[d.url]=e},e=function(){b[document.location.pathname]&&(document.title=b[document.location.pathname])},f={pages:{loaded:d,internal:{loaded:d}},page:{enter:e,internal:{enter:e}}};App.modules.exports("titleUpdater",{init:c,actions:function(){return f}})}(jQuery),function(a){"use strict";var b=!0,c=function(){return b?"/"+a("html").attr("lang")+"/":"/"},d=function(){App.mediator.goto(c())},e=function(){return{page:{toggleNoPreviousUrl:d}}},f=function(){};App.modules.exports("toggleNoPreviousUrl",{init:f,actions:e})}(jQuery),function(a){"use strict";var b=[],c=function(b,c){var d=b.currentPage,e=b.nextPage,f=a(e.key()),g=a(d.key()),h=function(){App.modules.notify("page.entering",{page:e,route:b.route}),f.css({opacity:1,display:"block"}),g.css({display:"none"}),e.enter(b.enterNext),App.callback(c)};App.modules.notify("page.leaving",{page:d}),d.leave(b.leaveCurrent),h()},d="",e=function(a,e){var f,g=c;for(f=0;f<b.length;f++){var h=b[f];if(!(h.from!==e.currentPage.key().substring(1)&&"*"!==h.from||h.to!==e.nextPage.key().substring(1)&&"*"!==h.to)&&h.canAnimate(e)){g=h.transition;break}}d=e.nextPage.key().substring(1),g(e,function(){d=""}),e.isHandled=!0},f=function(){return{pages:{requestPageTransition:e},pageTransitionAnimation:{getTargetPage:function(a,b){b||(b={result:{}}),b.result||(b.result={}),b.result.pageTransitionAnimation={},b.result.pageTransitionAnimation.target=d}}}},g=function(){a(App.root()).append(a('<div id="bg-transition" ></div>'))},h=function(d){var e=a.extend({from:"*",to:"*",transition:c,canAnimate:function(){return!0}},d);"*"===e.from&&"*"===e.to?c=e.transition:b.push(e)};App.modules.exports("pageTransitionAnimation",{init:g,actions:f}),window.App=a.extend(window.App,{transitions:{exports:h}})}(jQuery),function(a){"use strict";var b=a(window),c="",d="",e="",f={},g=function(){var f=document.location.pathname,g=!1,h=!1;return{urlChanged:function(){if(g)g=!1;else{var a=document.location.hash,b=App.pages.page(a.length>1?a.substring(1):document.location.pathname);if(b)if(b.key()==c){var f=d,i=document.location.hash.substring(f.length);(e!=i||h)&&(App.mediator.notify("page.fragmentChanged",i),e=i)}else App.mediator.goto(document.location.hash.substring(1))}},pageEntering:function(b){""===d?h=!0:(g=!0,b!=f?a.bbq.pushState("#"+b+e):a.bbq.pushState("#"))},pageEntered:function(){h&&b.trigger("hashchange")},updateUrlFragment:function(){g=!0;var b=d+e;"/"==d[d.length-1]&&"/"==e[0]&&(b=d+e.substring(1)),a.bbq.pushState("#"+b),g=!1}}},h=function(){var a=!1,b=!1;return{urlChanged:function(){var b=App.pages.page(document.location.pathname);if(b){if(a=!0,b.key()==c){var f=document.location.origin+d,g=document.location.href.substring(f.length);e!=g&&(App.mediator.notify("page.fragmentChanged",g),e=g)}else App.mediator.goto(document.location.pathname+document.location.search);a=!1}},pageEntering:function(c){var f=c;""===d&&(b=!0),""!==d&&(f+=e,a||history.pushState({},document.title,c+e))},pageEntered:function(){b&&(e=document.location.href.substring((document.location.protocol+"//"+document.location.host+d).length),App.mediator.notify("page.fragmentChanged",e))},updateUrlFragment:function(){history.pushState({},document.title,d+e)}}},i={hash:g(),history:h()},j=i.hash,k=function(){return a("body").hasClass("fr")?0:1},l=function(a){return a.page.routes()[k()]},m=function(a,b){var c=a.indexOf("*");return c>-1&&(a=a.substring(0,c),b.length>a.length?(e=b.substring(c),n()):(e="",f={})),a},n=function(){var a=e.indexOf("?");f=a>-1?window.QueryStringParser.parse(e.substring(a)):{}},o=function(b,e){var f=m(l(e),e.route);d!=f&&(j.pageEntering(f),d=f,c=e.page.key(),a.sendPageView({page:e.route}))},p=function(){j.pageEntered()},q=function(){e="",n()},r=function(a,b){""!==d&&("object"==typeof b||(e=b,n()),j.updateUrlFragment())},s=function(){var a="",b=0;for(var c in f)null!==f[c]&&(b>0&&(a+="&"),a+=c+"="+f[c],b++);return a},t=function(b,c){if("object"==typeof c){a.extend(f,c);var d=e.indexOf("?"),g=s();-1===d?e+="?"+g:e=e.substring(0,d+1)+g,j.updateUrlFragment()}},u=function(a,b){var c=e;m(l(b),b.route),j.updateUrlFragment(),e=c,n(),j.urlChanged()},v=function(){j.urlChanged()},w=function(){window.history.pushState?(j=i.history,b.on("popstate",v)):a.bbq?(j=i.hash,b.on("hashchange",v)):App.log({fx:"error",msg:"Cannot update url : history api and bbq are not found"})},x=function(){return{page:{entering:o,leaving:q,enter:p,updateUrlFragment:r,updateQsFragment:t},pages:{navigateToCurrent:u}}};App.modules.exports("urlChanger",{init:w,actions:x})}(jQuery),function(a){"use strict";var b=a(window),c=function(a){App.mediator.notify("site.resize",null,a)},d=function(a){App.mediator.notify("site.scroll",null,a)},e=function(){b.resize(c).scroll(d)};App.modules.exports("windowNotifier",{init:e})}(jQuery),function(a){"use strict";a(window);var b=a("body"),c=a("#site-pages"),d=function(d){var e=d.currentPage,f=d.nextPage,g=a(f.key()),h=a(e.key()),i=function(){App.modules.notify("page.entering",{page:f,route:d.route}),g.ready(function(){g.css({opacity:1,display:"block"}),b.addClass(f.key().substring(1)),c.animate({opacity:1},500),f.enter(d.enterNext)})};b.removeClass(e.key().substring(1)),c.animate({opacity:0},1e3,function(){App.modules.notify("page.leaving",{page:e}),e.leave(d.leaveCurrent),h.hide(),i()})};App.transitions.exports({transition:d,canAnimate:function(){return!0}})}(jQuery);
//# sourceMappingURL=framework.map