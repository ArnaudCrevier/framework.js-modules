!function(a){"use strict";var b="#site a.js-alt-lg-link";a(window);var c={},d=function(){var b={};a("link[rel=alternate][hreflang]",document).each(function(){var c=a(this);b[c.attr("hreflang")]=c.attr("href")}),c[document.location.pathname]=b},e=function(b,d){var e={};a(d.data).each(function(b,c){if(a(c).is("link")){var d=a(c);d.attr("hreflang")&&(e[d.attr("hreflang")]=d.attr("href"))}return a(c).is("body")?!0:void 0}),c[d.url]=e},f=function(){c[document.location.pathname]&&a(b).each(function(){var b=a(this);c[document.location.pathname][b.data("lg")]&&b.attr("href",c[document.location.pathname][b.data("lg")])})},g={pages:{loaded:e},page:{enter:f}};App.modules.exports("altLanguageLinkUpdater",{init:d,actions:function(){return g}})}(jQuery),function(a){"use strict";a.fn.extend({blankLink:function(){a(this).each(function(){var b=a(this),c=b.attr("href");c&&(/^https?:\/\//.test(c)||/^\/workspace/.test(c))&&"_blank"!=b.attr("target")&&(/^:\/\//.test(c)||b.attr("target","_blank"))})}});var b=function(b,c){a("a",a(c.page.key())).blankLink()},c=function(){},d={page:{enter:b}};App.modules.exports("blankLinkModule",{init:c,actions:function(){return d}})}(jQuery),function(a){"use strict";var b=function(a){return a.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=^>^<]+[^:\.,\)\s*$])/gi,function(a,b){return'<a title="'+a+'" href="'+a+'" target="_blank">'+(b.length>36?b.substr(0,35)+"&hellip;":b)+"</a>"})},c=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,15}(\/[a-zA-Z0-9-_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+)*)/gi,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'" target="_blank">@'+c+"</a>"})},d=function(a){return a.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ^"^<^>]+)/gi,function(a,b,c){return'"'===a.substr(-1)||"<"==a.substr(-1)?a:b+'<a href="https://twitter.com/search?q=%23'+c+'&src=hash" target="_blank">#'+c+"</a>"})};window.formatTwitter=function(){var e=a(this),f=e.html();"true"!==e.attr("data-formattwitter")&&(f=b(f),f=c(f),f=d(f),e.html(f),e.attr("data-formattwitter","true"))}}(jQuery),function(a){"use strict";var b=function(b){var c=a(this),d=c.attr("href");return b.ctrlKey?void 0:(App.mediator.goto(d),window.pd(b))},c=function(b){var c=a(this),d=c.attr("href");return App.mediator.toggle(d),window.pd(b)},d=function(){return{}},e=function(){var d='a[href^="/"]:not([href^="/workspace"]):not([data-action^="full"]):not([data-action^="toggle"]):not([data-action^="none"])';a("#site").on("click",d,b),a("#site").on("click",'a[href^="/"][data-action^="toggle"]',c)};App.modules.exports("links",{init:e,actions:d})}(jQuery),function(a,b){"use strict";var c={embed:function(a,b){var c=parseInt(a.attr("data-autoplay"),10),d=this.getIframe(b,c,10);d.attr("width","100%"),d.attr("height","100%"),a.append(d)},getIframe:function(){return a("<iframe/>")},play:function(){},pause:function(){}},d=a.extend({},c,{getIframe:function(c,d){return d=d!==b?d:1,a('<iframe src="http://player.vimeo.com/video/'+c+"?autoplay="+d+"&api=1&html5=1"+'"/>')},play:function(b){var c=window.$f(a("iframe",b).get(0));c.api("play")},pause:function(b){var c=window.$f(a("iframe",b).get(0));c.api("pause")}}),e=a.extend({},c,{getIframe:function(c,d){var e=c.indexOf("v=")>0?c.substring(c.indexOf("v=")+2):c.substring(c.lastIndexOf("/")),f=d!==b?d:1,g=a('<iframe id="youtube-player-'+e+'" src="http://www.youtube.com/embed/'+e+"?feature=oembed&autoplay="+f+"&enablejsapi=1&version=3&html5=1"+'"/>');return this._player=new window.YT.Player(g.get(0)),g},play:function(){this._player.playVideo()},pause:function(){this._player.pauseVideo()}}),f={Vimeo:d,YouTube:e},g=function(a,b){var c=b.data("videoId"),d=f[b.data("videoProvider")];d.embed(b,c)},h=function(a,b){b.data("videoId");var c=f[b.data("videoProvider")];c.play(b)},i=function(b,c){c.each(function(b,c){var d=a(c),e=d.data("videoId"),g=f[d.data("videoProvider")];g&&e&&d.find("iframe").length&&g.pause(d)})},j=function(b){var c=a(this),d=c.closest(".item-video"),e=a(".item-video-container",d);return g(null,e),c.fadeOut(),a(".item-video-container",d).fadeIn(),window.pd(b)},k=function(){a("#site").on("click","a.play-button",j)},l={loadVideo:g,playVideo:h,pauseVideo:i};App.modules.exports("oEmbed",{init:k,actions:function(){return l}})}(jQuery),function(a){"use strict";a(window),a("#site");var b=function(b,c){var d=document.location,e=d.protocol+"//"+d.host+d.pathname,f={service:"sharethis",title:document.title,url:e,type:"large"},g=a.extend(f,c);g.element&&window.stWidget&&window.stWidget.addEntry(g)},c=function(){},d={shareThis:{applyButton:b}};App.modules.exports("shareThis",{init:c,actions:function(){return d}})}(jQuery),function(a){"use strict";a(window),a("title",document);var b={},c=function(){b[document.location.pathname]=a("title").text()},d=function(c,d){var e="";a(d.data).each(function(b,c){return a(c).is("title")?(e=a(c).text(),!0):void 0}),d.url||(d.url=document.location.pathname),b[d.url]=e},e=function(){b[document.location.pathname]&&(document.title=b[document.location.pathname])},f={pages:{loaded:d,internal:{loaded:d}},page:{enter:e,internal:{enter:e}}};App.modules.exports("titleUpdater",{init:c,actions:function(){return f}})}(jQuery),function(a){"use strict";var b=!0,c=function(){return b?"/"+a("html").attr("lang")+"/":"/"},d=function(){App.mediator.goto(c())},e=function(){return{page:{toggleNoPreviousUrl:d}}},f=function(){};App.modules.exports("toggleNoPreviousUrl",{init:f,actions:e})}(jQuery),function(a){"use strict";var b=[],c="",d=function(b,c){var d=b.currentPage,e=b.nextPage,f=a(e.key()),g=a(d.key()),h=function(){App.modules.notify("page.entering",{page:e,route:b.route}),f.css({opacity:1,display:"block"}),g.css({display:"none"}),e.enter(b.enterNext),App.callback(c)};App.modules.notify("page.leaving",{page:d}),d.leave(b.leaveCurrent),h()},e=function(a,e){for(var f=d,g=0;g<b.length;g++){var h=b[g];if(!(h.from!==e.currentPage.key().substring(1)&&"*"!==h.from||h.to!==e.nextPage.key().substring(1)&&"*"!==h.to)&&h.canAnimate(e)){f=h.transition;break}}c=e.nextPage.key().substring(1),f(e,function(){c=""}),e.isHandled=!0},f=function(){return{pages:{requestPageTransition:e},pageTransitionAnimation:{getTargetPage:function(a,b){b||(b={result:{}}),b.result||(b.result={}),b.result.pageTransitionAnimation={},b.result.pageTransitionAnimation.target=c}}}},g=function(){a(App.root()).append(a('<div id="bg-transition" ></div>'))},h=function(c){var e=a.extend({from:"*",to:"*",transition:d,canAnimate:function(){return!0}},c);"*"===e.from&&"*"===e.to?d=e.transition:b.push(e)};App.modules.exports("pageTransitionAnimation",{init:g,actions:f}),window.App=a.extend(window.App,{transitions:{exports:h}})}(jQuery),function(a){"use strict";var b=a(window),c="",d="",e="",f={},g=function(){var f=document.location.pathname,g=!1,h=!1;return{urlChanged:function(){if(g)g=!1;else{var a=document.location.hash,b=App.pages.page(a.length>1?a.substring(1):document.location.pathname);if(b)if(b.key()==c){var f=d,i=document.location.hash.substring(f.length);(e!=i||h)&&(App.mediator.notify("page.fragmentChanged",i),e=i)}else App.mediator.goto(document.location.hash.substring(1))}},pageEntering:function(b){""===d?h=!0:(g=!0,b!=f?a.bbq.pushState("#"+b+e):a.bbq.pushState("#"))},pageEntered:function(){h&&b.trigger("hashchange")},updateUrlFragment:function(){var b=d+e;g=!0,"/"==d[d.length-1]&&"/"==e[0]&&(b=d+e.substring(1)),a.bbq.pushState("#"+b),g=!1}}},h=function(){var a=!1,b=!1;return{urlChanged:function(){var b=App.pages.page(document.location.pathname);if(b)if(b.key()==c){var f=document.location.origin+d,g=document.location.href.substring(f.length);e!=g&&(App.mediator.notify("page.fragmentChanged",g),e=g)}else a=!0,App.mediator.goto(document.location.pathname+document.location.search)},pageEntering:function(c){var f=c;""===d&&(b=!0),""!==d&&(f+=e,a||history.pushState({},document.title,c+e),a=!1)},pageEntered:function(){if(b){var a=document.location.href,c=document.location.protocol+"//"+document.location.host+d;e=a.substring(c.length),App.mediator.notify("page.fragmentChanged",e)}},updateUrlFragment:function(){history.pushState({},document.title,d+e)}}},i={hash:g(),history:h()},j=i.hash,k=function(){return a("body").hasClass("fr")?0:1},l=function(a){return a.page.routes()[k()]},m=function(a,b){var c=a.indexOf("*");return c>-1&&(a=a.substring(0,c),b.length>a.length?(e=b.substring(c),n()):(e="",f={})),a},n=function(){var a=e.indexOf("?");f=a>-1?window.QueryStringParser.parse(e.substring(a)):{}},o=function(b,e){var f=m(l(e),e.route);d!=f&&(j.pageEntering(f),d=f,c=e.page.key(),a.sendPageView({page:e.route}))},p=function(){j.pageEntered()},q=function(){e="",n()},r=function(b,c){""!==d&&("object"!=a.type(c)&&(e=c,n()),j.updateUrlFragment())},s=function(){var a="",b=0;for(var c in f)null!==f[c]&&(b>0&&(a+="&"),a+=c+"="+f[c],b++);return a},t=function(b,c){if("object"==typeof c){a.extend(f,c);var d=e.indexOf("?"),g=s();-1===d?e+="?"+g:e=e.substring(0,d+1)+g,j.updateUrlFragment()}},u=function(a,b){var c=e;m(l(b),b.route),j.updateUrlFragment(),e=c,n(),j.urlChanged()},v=function(){j.urlChanged()},w=function(){window.history.pushState?(j=i.history,b.on("popstate",v)):a.bbq?(j=i.hash,b.on("hashchange",v)):App.log({fx:"error",msg:"Cannot update url : history api and bbq are not found"})},x=function(){return{page:{entering:o,leaving:q,enter:p,updateUrlFragment:r,updateQsFragment:t},pages:{navigateToCurrent:u}}};App.modules.exports("urlChanger",{init:w,actions:x})}(jQuery),function(a){"use strict";var b=a(window),c=function(a){App.mediator.notify("site.resize",null,a)},d=function(a){App.mediator.notify("site.scroll",null,a)},e=function(){b.resize(c).scroll(d)};App.modules.exports("windowNotifier",{init:e})}(jQuery),function(a){"use strict";a(window);var b=a("body"),c=a("#site-pages"),d=function(d){var e=d.currentPage,f=d.nextPage,g=a(f.key()),h=a(e.key()),i=function(){App.modules.notify("page.entering",{page:f,route:d.route}),g.ready(function(){g.css({opacity:1,display:"block"}),b.addClass(f.key().substring(1)),c.animate({opacity:1},500),f.enter(d.enterNext)})};b.removeClass(e.key().substring(1)),c.animate({opacity:0},1e3,function(){App.modules.notify("page.leaving",{page:e}),e.leave(d.leaveCurrent),h.hide(),i()})};App.transitions.exports({transition:d,canAnimate:function(){return!0}})}(jQuery),function(){"use strict";var a=function(a){App.callback(a)},b=function(){};App.pages.exports("defaultPage",{init:b,enter:a})}(jQuery),function(a){"use strict";a.sendPageView=function(b){if(window.ga){var c={page:window.location.pathname+window.location.search,location:window.location.href,hostname:window.location.hostname},d=b?a.extend(c,b):c;window.ga("send","pageview",d)}}}(jQuery);
//# sourceMappingURL=framework.map